name: "Repo Trending Weekly"

on:
  workflow_dispatch:
    inputs:
      name:
        description: 'Person to click'
        required: true
        default: 'Monica'
  schedule:
    - cron: "5 2 1 * *"

jobs:
  Crawl-Build:
    
    runs-on: ubuntu-latest
    steps:
    - name: Checkout repository
      uses: actions/checkout@v2

    - name: Fetch Trending Repo
      uses: monoposer/repo-trending-action@v1.0.0
      with:
        lang: go

    - name: Commit Files
      run:  |
        git config --local user.email "41898282+github-actions[bot]@users.noreply.github.com"
        git config --local user.name "github-actions[bot]"
        git commit -m "Update" -a

    - name: Push Changes
      uses: ad-m/github-push-action@master
      with:
        github_token: ${{secrets.GITHUB_TOKEN}}
        branch: ${{github.ref}}